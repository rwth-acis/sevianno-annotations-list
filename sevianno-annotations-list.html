<link rel="import" href="bower_components/core-list/core-list.html">
<link rel="import" href="bower_components/core-icons/core-icons.html">
<link rel="import" href="bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="bower_components/polymer/polymer.html">
<!--
`sevianno-annotations-list` is an web component for showing list of annotations.

##### Example
<sevianno-annotations-list
on-show-annotation-called = "{{functionWhenAnnotationClicked}}"></sevianno-annotations-list>

This component uses a list core-list (https://www.polymer-project.org/0.5/docs/elements/core-list.html) to show the annotations.
Currently this is just a generated list, but when the connection with database is it will be populated from the database.

TODO: define the set of attributes that are needed.
 
@element sevianno-annotations-list
@status alpha
@source https://github.com/rwth-acis/sevianno-annotations-list
@homepage TODO: Deploy in cloud, a sample example.
-->
<polymer-element name="sevianno-annotations-list" >
   <template>
    <style>
	.annotationslist
	{
		height:500px;
		width:500px;
	}
    .item {
      box-sizing: border-box;
      height: 50px;
	  width: 500px;
      border-bottom: 1px solid #ddd;
      padding: 4px;
      cursor: default;
      background-color: white;
      overflow: hidden;
    }
   .container {
      min-width: 2em;
      padding: 1em;
	  float:left;
    }

    .container > div {
      color: black;
    }
    
    
  </style>
	<template repeat="{{multi ? selection: [selection]}}">
		<div class="selection-display">Id {{id}}: title: {{title}} time: {{time}}</div>
	</template>
      < <core-list data = "{{annotations}}" selectionEnabled="{{selectionEnabled}}" selection="{{selection}}" class = "annotationslist"  id = "list" flex multi>
	    <template>
          <div  class="item {{ {selected: selected} | tokenList }}">
		  
		   <button id="buttonPlay" on-tap="{{showAnnotation}}">Show</button>
            <div class="item" >
			<span class="container" vertical center layout>
            <core-icon icon="create"></core-icon>
            <div>New</div>
			</span>
			<span class="container" vertical center layout>
            <core-icon-button icon="forward"></core-icon-button >
            <div>View</div>
			</span>
			<span class="container" vertical center layout>
            <core-icon icon="delete"></core-icon>
            <div>Delete</div>
          </span>
			Annotation name {{model.title}} Annotation id {{model.id}} Annotation time {{model.time}}
		</div>
          </div>
        </template>
      </core-list>
  </template>
  <script>
    Polymer({
		/**
		* annotations is the set of annotatios. Currently it is not defined its type, but only the autogenerated list.
		* 
		* @attribute annotations
		* @type array
		* @default []
		*/
        annotations: [],
		
		/**
		* This attribute is the used for the list of items. Currently it is defined only for test purposes.
		* 
		* @attribute count
		* @type integer
		* @default 6
		*/
		count: 6,
		
		/**
		*This function is used to generate the list.
		*/
		generateAnnotations: function(){
		var data = [];
		for (var i = 0; i < this.count; i++)
		{
			data.push({
			id: i,
			title: "Annotation " + i,
			time: i			
        });
		}
		return data;
		},
		addAnnotation: function(titleAnnotation, timeAnnotation){
		this.annotations.push({
			id: this.annotations.length,
			title: titleAnnotation,
			time: timeAnnotation});
		},
		
		/**
		* Triggered when the component is ready.
		*/
		ready: function()
		{	
			this.annotations = this.generateAnnotations();
			this.addAnnotation("Title",89);
			
		},
		
		/**
		* Used when the user clicks the button Play in the element.
		* Fires event show-annotation-called.
		*/
		showAnnotation:function(e)
		{
		
			console.log("showAnnotation called");
			this.fire('show-annotation-called',{ timeAnnotation: 4 });
		}
		
    });
  </script>
</polymer-element>